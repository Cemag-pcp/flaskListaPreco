{% extends "layout.html" %}
{% block body %}

<form class="botoes_gerar_consultar" method="post">
   <div class="custom-card2">
   <h1 style="font-size: 30px;">Selecione uma opção:</h1>
      <div class="opcoes_botoes"> 
         <button class="gerar_proposta" type="submit" name="option" value="lista">Gerar Proposta</button>
         <button class="consulta_precos" type="submit" name="option" value="consulta">Consulta de preços</button>
         <button class="cadastrar_cliente" name="option" id="modal-cadastrar-cliente">Cadastrar Cliente</button>
      </div>
   </div>
</form>
<div class="container pt-4" style="transition: 0.5s;">
   <div class="row">
      <div class="col-md-6 mb-3">

         <div class="input-group" style="width: 65%;">
            
            <input type="text" id="searchInput" class="form-control" placeholder="Filtrar qualquer valor">
            <div class="input-group-append">
               <span class="input-group-text">
               <i class="fa fa-search"></i>
               </span>
            </div>

        </div>
      </div>
    </div>
   <div class="row">
      {% for dado in data %}
      <div class="col-md-4 mb-3">
         <div class="custom-card">
            <div class="card-body">
               <!-- <h5 class="card-title">{{ dado.DealId }}</h5> -->
               <h6 class="card-text">{{ dado.ContactName }} - {{ dado.DealId }}</h6>
               <p class="data-aceito card-aceito">Aceito: {% if dado.ExternallyAccepted == 'Sim' %}
                  <span style="color: green;">{{ dado.ExternallyAccepted }}</span>
                  {% else %}
                  <span style="color: red;">{{ dado.ExternallyAccepted }}</span>
                  {% endif %}
               </p>
               {% if dado.ApprovalStatusId == 1 %}
                  <p class="card-text" >
                     <i class="fas fa-exclamation-triangle button-icon" style="color: orange;"></i> Aguardando aprovação
                  </p>
               {% else %}
                  <p></p>
               {% endif %}
               <p class="data-status card-status">Status:
               {% if dado.StatusId == 1 %}
                  <span style="color: blue;">Em Aberto</span>
               {% elif dado.StatusId == 2 %}
                  <span style="color: green;">Ganha</span>
               {% elif dado.StatusId == 3 %}
                  <span style="color: red;">Perdida</span>
               {% endif %}
               </p>
               <p class="card-text">Data: {{ dado.LastUpdateDate}}</p>
               <p class="card-text">Valor: R$ {{ dado.Amount}}</p>
               {% if dado.StatusId == 2 or dado.StatusId == 3 or dado.ApprovalStatusId == 1 %}
                  <a></a>
                  <a></a>
               {% else %}
                  <a class="btn btn-success btn-sm" style="color: #fff; padding: 0.1rem 0.5rem;" onclick="showModalGanhar('{{ dado.DealId }}')">Ganhar</a>
                  <a class="btn btn-danger btn-sm" style="color: #fff; padding: 0.1rem 0.5rem;" onclick="showModalPerder('{{ dado.DealId }}')">Perder</a>
                  <a class="btn btn-info btn-sm" style="color: #fff; padding: 0.1rem 0.5rem;" onclick="reenviarEmail('{{ dado.DealId }}', '{{ dado.ContactName }}')">Reenviar e-mail</a>
                  <!-- <a class="btn btn-info btn-sm" style="color: #fff; padding: 0.1rem 0.5rem;" onclick="revisarProposta('{{ dado.DealId }}')">Revisar</a> -->

                  <a class="btn btn-success btn-sm" style="color: #fff; padding: 0.1rem 0.5rem;" onclick="showModalRevisar('{{ dado.DealId }}')">Revisar</a>

               {% endif %}
            </div>
         </div>

         <div class="modal fade" id="modalPerder" tabindex="-1" role="dialog" aria-labelledby="modalPerderLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalPerderLabel">Perder proposta</h5>
                        <button type="button" class="close" aria-label="Fechar">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body-perder" style="text-align: center">
                        <!-- Conteúdo será preenchido dinamicamente usando JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalGanhar" tabindex="-1" role="dialog" aria-labelledby="modalGanharLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <!-- Conteúdo do Modal Ganhar -->
                    </div>
                </div>
            </div>
        </div>        
      </div>
      {% endfor %}
   </div>
</div>

<div id="success-message" class="alert alert-success top-message slide-in" style="display: none;">
   Ação bem-sucedida! Sua mensagem de sucesso aqui.
</div>

<div id="loading-overlay" style="display: none;">
   <div id="loading-spinner"></div>
</div>

<script>
   // Script para procurar na lista de cards
   document.getElementById("searchInput").addEventListener("input", function () {
      var searchValue = this.value.toLowerCase();
      var cards = document.querySelectorAll(".custom-card");

      cards.forEach(function (card) {
         var cardText = card.textContent.toLowerCase();
         if (cardText.includes(searchValue)) {
            card.style.display = "block";
         } else {
            card.style.display = "none";
         }
      });
   }); 

</script>

<script>
   function reenviarEmail(dealId, nomeCliente) {
      // Exiba o overlay de carregamento
      $("#loading-overlay").show();

      // Dados a serem enviados para o backend
      const data = {
         dealId: dealId,
         nomeCliente: nomeCliente
      };

      // Configuração da solicitação
      const requestOptions = {
         method: 'GET', // Use 'POST' para enviar dados para o backend
         headers: {
            'Content-Type': 'application/json' // Tipo de conteúdo JSON
         },
         body: JSON.stringify(data) // Converte os dados em formato JSON
      };

      // URL do endpoint no seu backend
      const backendEndpoint = '/reenviarEmail';

      // Faça a solicitação POST para o backend
      fetch(backendEndpoint, requestOptions)
         .then(response => {
            if (!response.ok) {
               throw new Error('Erro ao enviar dados para o backend');
            }
            return response.json(); // Se o backend responder com JSON
         })
         .then(responseData => {
            // Manipule a resposta do backend, se necessário
            console.log('Resposta do Backend:', responseData);

            // Oculte o overlay após receber a resposta
            $("#loading-overlay").hide();
         })
         .catch(error => {
            console.error('Erro:', error);

            // Oculte o overlay em caso de erro também
            $("#loading-overlay").hide();
         });
   }

</script>

<script>
   function showModalGanhar(dealId) {
      // Defina o conteúdo do modal para a ação "Ganhar" com base no dealId
      var modalBody = document.getElementById("modalGanhar").querySelector(".modal-body");
      
      // Fechar o modal ao clicar no botão de fechar
      $('#modalGanhar').on('click', '.close', function () {
         $('#modalGanhar').modal('hide');
      });

      // Send a GET request to the backend
      $.ajax({
         url: '/escolherProposta',
         type: 'GET',
         data: {
            dealId: dealId,
         },
         success: function (response) {
            // Preencher a modal com os dados recebidos
            var modalBody = $('.modal-body'); // Selecione o elemento com a classe modal-body
            modalBody.empty(); // Limpe o conteúdo existente

            // Título do modal
            modalBody.append('<div class="modal-header"><h5 class="modal-title" id="modalGanharLabel">Ganhar proposta</h5><button type="button" class="close" aria-label="Fechar"><span aria-hidden="true">&times;</span></button></div>');

            $.each(response, function (index, item) {

               var formattedAmount = 'R$ ' + parseFloat(item.Amount).toLocaleString('pt-BR', {
                  minimumFractionDigits: 2,
                  maximumFractionDigits: 2
               });

               // Crie um card para cada item
               var card = $('<div class="card1">');
               var cardBody = $('<div class="card-body1">');
               
               // Formatando data
               var dataString = item.Date;
               var dataFormatada = moment(dataString).format('DD/MM/YYYY HH:mm:ss');
               
               // Adicione o conteúdo do card
               cardBody.append('<h5 class="card-title1">' + formattedAmount + '</h5>');
               cardBody.append('<a href="' + item.DocumentUrl + '" class="card-link" target="_blank">Link para PDF</a><br>');
               cardBody.append('<a>' + dataFormatada + '</a><br>');
               


               // Adicione um botão de confirmar ao card
               var confirmButton = $('<button class="btn btn-info btn-sm ganhar">Confirmar</button>');
               
               // Adicione um evento de clique para os botões de confirmar
               confirmButton.on('click', function () {
                  $("#loading-overlay").show();

                  var id = item.Id; // Obtenha o ID do item
                  // Envie as informações da linha para o backend por meio de uma solicitação AJAX
                  $.ajax({
                     url: '/ganhar',
                     type: 'POST',
                     contentType: 'application/json',
                     data: JSON.stringify({
                        dealId: dealId,
                        id: id,
                     }),
                     success: function (response) {
                        window.location.reload();

                        // Após a ação bem-sucedida
                        $('#success-message').html('Proposta ganha com sucesso.').show();

                        // Defina um temporizador para ocultar a mensagem após 5 segundos
                        setTimeout(function() {
                           $('#success-message').hide();
                        }, 5000); // 5000 milissegundos (5 segundos)

                        $("#loading-overlay").hide();
                     },
                     error: function (error) {
                        console.log(error);
                     }
                  });
               });

               cardBody.append(confirmButton);
               card.append(cardBody);
               
               // Adicione o card à modal
               modalBody.append(card);
            });

            $("#loading-overlay").hide();
         },
         error: function (error) {
            console.log(error);
         }
      });

      // Abra o modal
      $('#modalGanhar').modal('show');
   }

   function showModalPerder(dealId) {

    // Defina o conteúdo do modal para a ação "Perder" com base no dealId
    var modalBody = $('.modal-body-perder'); // Selecione o elemento com a classe modal-body
    modalBody.empty(); // Limpe o conteúdo existente
    modalBody.innerHTML = "Você está prestes a perder o negócio " + dealId;

    // Crie um elemento select para os motivos de perda
    var select = $('<select class="form-control" id="motivosPerda" name="motivosPerda" required>');
    
    // Adicione uma opção padrão (por exemplo, "Selecione um motivo")
    var defaultOption = $('<option value="">Selecione um motivo</option>');
    select.append(defaultOption);

   // Fechar o modal ao clicar no botão de fechar
   $('#modalPerder').on('click', '.close', function () {
      $('#modalPerder').modal('hide');
   });


    // Send a GET request to the backend
    $.ajax({
        url: '/motivosPerda',
        type: 'GET',
        success: function (response) {
         
            // Preencher o select com os motivos de perda recebidos
            $.each(response, function (index, item) {
               var option = $('<option value="' + item.Id + '">' + item.Name + '</option>');
               console.log(option);
               select.append(option);
            });

            // Adicione o select ao modalBody
            modalBody.append(select);

            // Adicione um botão "Perder"
            var button = $('<button class="btn btn-primary" style="margin-top: 10px;">Perder</button>');

            // Adicione um evento de clique ao botão
            button.on('click', function () {
               var selectedMotivoId = $('#motivosPerda').val();

               // Verifique se a opção selecionada é "Selecione um motivo"
               if (selectedMotivoId === '') {
                  // Mostre uma mensagem de erro para selecionar um motivo válido
                  alert("Por favor, selecione um motivo válido.");
                  return; // Impede o envio
               }

               $.ajax({
                  url: '/perda',
                  type: 'POST',
                  contentType: 'application/json',
                  data: JSON.stringify({
                     selectedMotivoId: selectedMotivoId,
                     dealId: dealId,
                  }),
                  success: function (response) {
                     window.location.reload();

                     $("#loading-overlay").hide();

                     // Após a ação bem-sucedida
                     $('#success-message').html('Proposta perdida com sucesso.').show();

                     // Defina um temporizador para ocultar a mensagem após 5 segundos
                     setTimeout(function() {
                        $('#success-message').hide();
                     }, 5000); // 5000 milissegundos (5 segundos)

                  },
                  error: function (error) {
                     console.log(error);
                  }
               });



               // Fechar o modal quando o botão for clicado
               $('#modalPerder').modal('hide');
            });

            // Adicione o botão ao modalBody
            modalBody.append(button);

            // Abra o modal após preencher o conteúdo
            $('#modalPerder').modal('show');
        }
    });
}
</script>

<script>
   function showModalRevisar(dealId) {
      // Defina o conteúdo do modal para a ação "Ganhar" com base no dealId
      var modalBody = document.getElementById("modalGanhar").querySelector(".modal-body");
      
      // Fechar o modal ao clicar no botão de fechar
      $('#modalGanhar').on('click', '.close', function () {
         $('#modalGanhar').modal('hide');
      });

      // Send a GET request to the backend
      $.ajax({
         url: '/escolherProposta',
         type: 'GET',
         data: {
            dealId: dealId,
         },
         success: function (response) {
            // Preencher a modal com os dados recebidos
            var modalBody = $('.modal-body'); // Selecione o elemento com a classe modal-body
            modalBody.empty(); // Limpe o conteúdo existente

            // Título do modal
            modalBody.append('<div class="modal-header"><h5 class="modal-title" id="modalGanharLabel">Revisar proposta</h5><button type="button" class="close" aria-label="Fechar"><span aria-hidden="true">&times;</span></button></div>');

            $.each(response, function (index, item) {

               var formattedAmount = 'R$ ' + parseFloat(item.Amount).toLocaleString('pt-BR', {
                  minimumFractionDigits: 2,
                  maximumFractionDigits: 2
               });

               // Crie um card para cada item
               var card = $('<div class="card1">');
               var cardBody = $('<div class="card-body1">');
               
               // Formatando data
               var dataString = item.Date;
               var dataFormatada = moment(dataString).format('DD/MM/YYYY HH:mm:ss');
               var quote_id = item.Id;
               var DealId = dealId;

               // Adicione o conteúdo do card
               cardBody.append('<h5 class="card-title1">' + formattedAmount + '</h5>');
               cardBody.append('<a href="' + item.DocumentUrl + '" class="card-link" target="_blank">Link para PDF</a><br>');
               cardBody.append('<a>' + dataFormatada + '</a><br>');

               // Adicione um botão de confirmar ao card
               // var confirmButton = $('<button class="btn btn-info btn-sm ganhar">Confirmar</button>');
               
               // cardBody.append(confirmButton);
               
               // cardBody.append('<form id="revisar" action="/consulta" method="POST"><input type="hidden" name="valor" value="' + quote_id + '"><button value="teste">Revisar</button></form>');
               cardBody.append('<form id="revisar" action="/consulta" method="POST"><input type="hidden" name="valor" value="' + quote_id + '"><input type="hidden" name="dealId" value="' + DealId + '"><button type="submit">Revisar</button></form>');

               card.append(cardBody);
               
               // Adicione o card à modal
               modalBody.append(card);
            });

            $("#loading-overlay").hide();
         },
         error: function (error) {
            console.log(error);
         }
      });

      // Abra o modal
      $('#modalGanhar').modal('show');
   }
</script>

<!-- Funções para criar elementos de modal para cadastro de empresa ou contato -->

<script>

   // Modal para abrir opções de cadastro de cliente ou contato

   function showModalEscolhaClienteOuContato(event) {
      event.preventDefault(); // Prevenir o envio do formulário padrão

      // Defina o conteúdo do modal para a ação "Cadastrar Cliente"
      var modalBody = document.getElementById("modalGanhar").querySelector(".modal-body");
      modalBody.innerHTML = ''; // Limpar o conteúdo atual do modal

      // Aqui, você pode criar e adicionar o formulário ao modal
      var form_cadastrar_cliente = $('<div class="cadastrar-cliente">');
      var title = $('<div class="modal-header"><h5 class="modal-title" id="modalGanharLabel">Cadastro</h5><button type="button" class="close" aria-label="Fechar"><span aria-hidden="true">&times;</span></button></div>');
      var div = $('<div style="display:flex;justify-content:space-around;margin-top:20px;">')
      var botaoModalCliente = $('<button id="cadastrar-empresa" class="btn btn-info btn-sm" style="color: #fff; padding: 15px; font-weight: bold; font-size: 20px;">Empresa</button>');
      var botaoModalContato = $('<button id="cadastrar-contato" class="btn btn-info btn-sm" style="color: #fff; padding: 15px; font-weight: bold; font-size: 20px;">Contato</button>');

      div.append(botaoModalCliente, botaoModalContato)
      
      form_cadastrar_cliente.append(title,div);

      modalBody.appendChild(form_cadastrar_cliente[0]);

      // Abra o modal
      $('#modalGanhar').modal('show');
   }

   // Associar o evento de clique ao botão "Cadastrar Cliente ou contato"
   $(document).on('click', '#modal-cadastrar-cliente', function (event) {
      showModalEscolhaClienteOuContato(event);
   });

   // Fechar o modal ao clicar no botão de fechar
   $('#modalGanhar').on('click', '.close', function () {
      $('#modalGanhar').modal('hide');
   });

   // Modal de cadastro de cliente

   function showModalCriarEmpresa(event) {
      event.preventDefault(); // Prevenir o envio do formulário padrão

      // Defina o conteúdo do modal para a ação "Cadastrar Cliente"
      var modalBody = document.getElementById("modalGanhar").querySelector(".modal-body");
      modalBody.innerHTML = ''; // Limpar o conteúdo atual do modal

      // Crie o formulário com rótulos acima dos campos de entrada
      var form_cadastrar_empresa = $('<div class="cadastrar-empresa">');
      var title = $('<div class="modal-header"><h5 class="modal-title" id="modalGanharLabel">Cadastrar Empresa</h5><button type="button" class="close" aria-label="Fechar"><span aria-hidden="true">&times;</span></button></div>');
      form_cadastrar_empresa.append(title);


      // // Aqui, você pode criar e adicionar o formulário ao modal
      // var form_cadastrar_cliente = $('<div class="cadastrar-cliente">');
      // var labelNomeInput = $('<label>Nome:</label>');
      // var nomeInput = $('<input type="text" placeholder="Nome">');
      // var labelTelefoneInput = $('<label>Telefone:</label>');
      // var telefoneInput = $('<input type="tel" placeholder="Telefone">');
      // var labelCidadeInput = $('<label>Cidade:</label>');
      // var cidadeInput = $('<input type="cidade" placeholder="Cidade">');
      // var labelResponsavelInput = $('<label>Responsável:</label>');
      // var responsavelInput = $('<input type="responsavel" placeholder="Responsável">');
      // var botaoEnviar = $('<button id="enviar-cadastro-cliente">Cadastrar</button>');
      
      var labelNomeInput = $('<label for="nomeInput" class="form-label">Nome:</label>');
      var nomeInput = $('<input type="text" class="form-control" id="nomeInput" placeholder="Nome">');
      var labelTelefoneInput = $('<label for="telefoneInput" class="form-label">Telefone:</label>');
      var telefoneInput = $('<input type="tel" class="form-control" id="telefoneInput" placeholder="Telefone">');
      var labelCidadeInput = $('<label class="form-label" for="cidadeInput">Cidade:</label>');
      var cidadeInput = $('<input type="text" class="form-control" id="cidadeInput" placeholder="Cidade">');
      var cidadeSugestoes = $('<div id="suggestions"></div>')
      var labelResponsavelInput = $('<label class="form-label" for="responsavelInput">Responsável:</label>');
      var responsavelInput = $('<select class="form-control" id="responsavelInput" placeholder="Responsável">');
      var funcionarios = ["Amanda", "Ana Gysele", "Alan Luersen","Felipe Barros","Humberto","Katylene","Lahis","Luan","Lucas Gallo","Olindo","Pereira","Renato Rodi","Roberto","Sônia","Thays","Walter"];
      
      cidadeInput.on('input', function() {
      var inputValue = $(this).val();
      inputCidades(inputValue)
         .then(function(cidades) {
               // Limpe as sugestões anteriores
               $('#suggestions').empty();

               // Adicione as novas sugestões
               cidades.forEach(function(cidade) {
                  var suggestionItem = $('<div class="suggestion-item">' + cidade.Name + " - " + cidade.State.Name +'</div>');
                  suggestionItem.on('mousedown', function(event) {
                     // Impede que o input perca o foco
                     event.preventDefault();
                     // Preencha o campo cidadeInput com a sugestão clicada
                     cidadeInput.val(cidade.Name);
                     // Limpe as sugestões
                     $('#suggestions').empty();
                     $('#suggestions').hide();
                  });
                  // Adicione a sugestão à lista de sugestões
                  $('#suggestions').append(suggestionItem);
               });

               $('#suggestions').show();
         })
         .catch(function(error) {
               console.error(error);
         });
   })
   .on('blur', function() {
      // Esconda as sugestões quando o cursor sai do input
   });

      var optionDefault = $('<option></option>').attr({
         'value': '',
         'selected': 'selected',
         'hidden': 'hidden',
         'disabled': 'disabled',
         'style': 'color: gray;'
      }).text('Selecione um responsável');

      // Adiciona o <option> padrão ao início do select
      responsavelInput.append(optionDefault);

      for (var i = 0; i < funcionarios.length; i++) {
         var option = $('<option></option>').attr('value', funcionarios[i]).text(funcionarios[i]);
         responsavelInput.append(option);
      }
      // Botão de envio
      var botaoEnviar = $('<button id="enviar-cadastro-empresa" class="btn btn-success btn-sm" style="color: #fff; padding: 8px; margin-top:15px; font-weight: bold;">Cadastrar</button>');

      // Adicione as linhas ao formulário
      form_cadastrar_empresa.append(labelNomeInput, nomeInput, labelTelefoneInput, telefoneInput,
      labelCidadeInput, cidadeInput, cidadeSugestoes,labelResponsavelInput, responsavelInput, botaoEnviar);

      modalBody.appendChild(form_cadastrar_empresa[0]);

      // Abra o modal
      $('#modalGanhar').modal('show');
   }

   // Associar o evento de clique ao botão "Cadastrar Empresa"
   $(document).on('click', '#cadastrar-empresa', function (event) {
      showModalCriarEmpresa(event);
   });

   // Fechar o modal ao clicar no botão de fechar
   $('#modalGanhar').on('click', '.close', function () {
      $('#modalGanhar').modal('hide');
   });

   // Modal de cadastro de contato

   function inputCidades(inputValue) {
      var apiKey = '5151254EB630E1E946EA7D1F595F7A22E4D2947FA210A36AD214D0F98E4F45D3EF272EE07FCF09BB4AEAEA13976DCD5E1EE313316FD9A5359DA88975965931A3';
      var apiUrl = `https://public-api2.ploomes.com/Cities?$expand=State,Country&$skip=0&$top=10&$filter=(startswith(Name,'${inputValue}'))&$select=Id,IBGECode,Name&$orderby=Name&$count=true`;

      return fetch(apiUrl, {
         method: 'GET',
         headers: {
               'User-Key': apiKey
         }
      })
      .then(response => response.json())
      .then(data => data.value)
      .catch(error => {
         console.error(error);
         return [];
      });
   }
  
   function showModalCriarContato(event) {
      event.preventDefault(); // Prevenir o envio do formulário padrão

      // Defina o conteúdo do modal para a ação "Cadastrar contato"
      var modalBody = document.getElementById("modalGanhar").querySelector(".modal-body");
      modalBody.innerHTML = ''; // Limpar o conteúdo atual do modal

      // Aqui, você pode criar e adicionar o formulário ao modal
      var form_cadastrar_cliente = $('<div class="cadastrar-cliente">');
      var title = $('<div class="modal-header"><h5 class="modal-title" id="modalGanharLabel">Cadastrar contato</h5><button type="button" class="close" aria-label="Fechar"><span aria-hidden="true">&times;</span></button></div>');
      var labelNomeInput = $('<label class="form-label">Nome:</label>');
      var nomeInput = $('<input type="text" class="form-control" placeholder="Nome do cliente">');
      var labelEmailInput = $('<label class="form-label">Email:</label>');
      var emailInput = $('<input type="email" class="form-control" placeholder="Email do cliente">');
      var labelTelefoneInput = $('<label class="form-label">Telefone:</label>');
      var telefoneInput = $('<input type="tel" class="form-control" placeholder="Telefone do cliente">');
      var botaoEnviar = $('<button id="enviar-cadastro-contato" class="btn btn-success btn-sm" style="color: #fff; padding: 8px; margin-top:15px; font-weight: bold;">Cadastrar</button>');
      
      form_cadastrar_cliente.append(title,labelNomeInput, nomeInput,labelEmailInput ,emailInput,labelTelefoneInput ,telefoneInput, botaoEnviar);

      modalBody.appendChild(form_cadastrar_cliente[0]);

      // Abra o modal
      $('#modalGanhar').modal('show');
   }

   // Associar o evento de clique ao botão "Cadastrar contato"
   $(document).on('click', '#cadastrar-contato', function (event) {
      showModalCriarContato(event);
   });

   // Fechar o modal ao clicar no botão de fechar
   $('#modalGanhar').on('click', '.close', function () {
      $('#modalGanhar').modal('hide');
   });

</script>



{% endblock %}